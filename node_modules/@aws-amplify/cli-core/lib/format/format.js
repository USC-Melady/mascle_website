import * as os from 'node:os';
import { blue, bold, cyan, dim, green, grey, magenta, red, underline, yellow, } from 'kleur/colors';
import { AmplifyFault } from '@aws-amplify/platform-core';
import { getPackageManagerRunnerName } from '../package-manager-controller/get_package_manager_name.js';
/**
 * Formats various inputs into single string.
 */
export class Format {
    packageManagerRunnerName;
    /**
     * Initialize with a package manager runner name. Defaults to attempting to load a value derived from environment variables.
     */
    constructor(packageManagerRunnerName = getPackageManagerRunnerName()) {
        this.packageManagerRunnerName = packageManagerRunnerName;
    }
    normalizeAmpxCommand = (command) => {
        if (command.length === 0) {
            throw new AmplifyFault('InvalidFormatFault', {
                message: 'The command must be non-empty',
            });
        }
        return cyan(`${this.packageManagerRunnerName} ampx ${command}`);
    };
    error = (error) => {
        if (error instanceof Error) {
            const message = red(`${error.name}: ${error.message}`);
            if (error.cause) {
                return message + os.EOL + this.error(error.cause);
            }
            return message;
        }
        else if (typeof error === 'string') {
            return red(error);
        }
        try {
            return red(JSON.stringify(error, null, 2));
        }
        catch (e) {
            return red('Unknown error') + os.EOL + this.error(e);
        }
    };
    note = (message) => grey(message);
    command = (command) => cyan(command);
    highlight = (command) => cyan(command);
    success = (message) => green(message);
    sectionHeader = (header) => bold(blue(header));
    bold = (message) => bold(message);
    dim = (message) => dim(message);
    link = (link) => underline(blue(link));
    list = (lines) => lines.map((line) => ` - ${line}`).join(os.EOL);
    indent = (message) => {
        if (message === '') {
            throw new Error('Message cannot be empty');
        }
        const spaces = '  '; // Two spaces for indentation
        return message
            .split(os.EOL)
            .map((line) => `${spaces}${line}`)
            .join(os.EOL);
    };
    record = (record) => Object.entries(record)
        .map(([key, value]) => `${key}: ${String(value)}`)
        .join(os.EOL);
    color = (message, colorName) => colors[colorName](message);
}
// Map to connect colorName to kleur color
const colors = {
    Green: green,
    Yellow: yellow,
    Blue: blue,
    Magenta: magenta,
    Cyan: cyan,
};
export const colorNames = [
    'Green',
    'Yellow',
    'Blue',
    'Magenta',
    'Cyan',
];
export const format = new Format();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybWF0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Zvcm1hdC9mb3JtYXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFDOUIsT0FBTyxFQUVMLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLEdBQUcsRUFDSCxLQUFLLEVBQ0wsSUFBSSxFQUNKLE9BQU8sRUFDUCxHQUFHLEVBQ0gsU0FBUyxFQUNULE1BQU0sR0FDUCxNQUFNLGNBQWMsQ0FBQztBQUN0QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDMUQsT0FBTyxFQUFFLDJCQUEyQixFQUFFLE1BQU0sMkRBQTJELENBQUM7QUFFeEc7O0dBRUc7QUFDSCxNQUFNLE9BQU8sTUFBTTtJQUtFO0lBSm5COztPQUVHO0lBQ0gsWUFDbUIsMkJBQTJCLDJCQUEyQixFQUFFO1FBQXhELDZCQUF3QixHQUF4Qix3QkFBd0IsQ0FBZ0M7SUFDeEUsQ0FBQztJQUNKLG9CQUFvQixHQUFHLENBQUMsT0FBZSxFQUFFLEVBQUU7UUFDekMsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUN4QixNQUFNLElBQUksWUFBWSxDQUFDLG9CQUFvQixFQUFFO2dCQUMzQyxPQUFPLEVBQUUsK0JBQStCO2FBQ3pDLENBQUMsQ0FBQztTQUNKO1FBQ0QsT0FBTyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsd0JBQXdCLFNBQVMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUNsRSxDQUFDLENBQUM7SUFDRixLQUFLLEdBQUcsQ0FBQyxLQUErQixFQUFVLEVBQUU7UUFDbEQsSUFBSSxLQUFLLFlBQVksS0FBSyxFQUFFO1lBQzFCLE1BQU0sT0FBTyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLEtBQUssS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7WUFFdkQsSUFBSSxLQUFL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MENBQTBDO0FBQzFDLE1BQU0sTUFBTSxHQUFnQztJQUMxQyxLQUFLLEVBQUUsS0FBSztJQUNaLE1BQU0sRUFBRSxNQUFNO0lBQ2QsSUFBSSxFQUFFLElBQUk7SUFDVixPQUFPLEVBQUUsT0FBTztJQUNoQixJQUFJLEVBQUUsSUFBSTtDQUNYLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUc7SUFDeEIsT0FBTztJQUNQLFFBQVE7SUFDUixNQUFNO0lBQ04sU0FBUztJQUNULE1BQU07Q0FDRSxDQUFDO0FBSVgsTUFBTSxDQUFDLE1BQU0sTUFBTSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBvcyBmcm9tICdub2RlOm9zJztcbmltcG9ydCB7XG4gIENvbG9yaXplLFxuICBibHVlLFxuICBib2xkLFxuICBjeWFuLFxuICBkaW0sXG4gIGdyZWVuLFxuICBncmV5LFxuICBtYWdlbnRhLFxuICByZWQsXG4gIHVuZGVybGluZSxcbiAgeWVsbG93LFxufSBmcm9tICdrbGV1ci9jb2xvcnMnO1xuaW1wb3J0IHsgQW1wbGlmeUZhdWx0IH0gZnJvbSAnQGF3cy1hbXBsaWZ5L3BsYXRmb3JtLWNvcmUnO1xuaW1wb3J0IHsgZ2V0UGFja2FnZU1hbmFnZXJSdW5uZXJOYW1lIH0gZnJvbSAnLi4vcGFja2FnZS1tYW5hZ2VyLWNvbnRyb2xsZXIvZ2V0X3BhY2thZ2VfbWFuYWdlcl9uYW1lLmpzJztcblxuLyoqXG4gKiBGb3JtYXRzIHZhcmlvdXMgaW5wdXRzIGludG8gc2luZ2xlIHN0cmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIEZvcm1hdCB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHdpdGggYSBwYWNrYWdlIG1hbmFnZXIgcnVubmVyIG5hbWUuIERlZmF1bHRzIHRvIGF0dGVtcHRpbmcgdG8gbG9hZCBhIHZhbHVlIGRlcml2ZWQgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IHBhY2thZ2VNYW5hZ2VyUnVubmVyTmFtZSA9IGdldFBhY2thZ2VNYW5hZ2VyUnVubmVyTmFtZSgpLFxuICApIHt9XG4gIG5vcm1hbGl6ZUFtcHhDb21tYW5kID0gKGNvbW1hbmQ6IHN0cmluZykgPT4ge1xuICAgIGlmIChjb21tYW5kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFtcGxpZnlGYXVsdCgnSW52YWxpZEZvcm1hdEZhdWx0Jywge1xuICAgICAgICBtZXNzYWdlOiAnVGhlIGNvbW1hbmQgbXVzdCBiZSBub24tZW1wdHknLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBjeWFuKGAke3RoaXMucGFja2FnZU1hbmFnZXJSdW5uZXJOYW1lfSBhbXB4ICR7Y29tbWFuZH1gKTtcbiAgfTtcbiAgZXJyb3IgPSAoZXJyb3I6IHN0cmluZyB8IEVycm9yIHwgdW5rbm93bik6IHN0cmluZyA9PiB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZWQoYCR7ZXJyb3IubmFtZX06ICR7ZXJyb3IubWVzc2FnZX1gKTtcblxuICAgICAgaWYgKGVycm9yLmNhdXNlKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlICsgb3MuRU9MICsgdGhpcy5lcnJvcihlcnJvci5jYXVzZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiByZWQoZXJyb3IpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHJlZChKU09OLnN0cmluZ2lmeShlcnJvciwgbnVsbCwgMikpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiByZWQoJ1Vua25vd24gZXJyb3InKSArIG9zLkVPTCArIHRoaXMuZXJyb3IoZSk7XG4gICAgfVxuICB9O1xuICBub3RlID0gKG1lc3NhZ2U6IHN0cmluZykgPT4gZ3JleShtZXNzYWdlKTtcbiAgY29tbWFuZCA9IChjb21tYW5kOiBzdHJpbmcpID0+IGN5YW4oY29tbWFuZCk7XG4gIGhpZ2hsaWdodCA9IChjb21tYW5kOiBzdHJpbmcpID0+IGN5YW4oY29tbWFuZCk7XG4gIHN1Y2Nlc3MgPSAobWVzc2FnZTogc3RyaW5nKSA9PiBncmVlbihtZXNzYWdlKTtcbiAgc2VjdGlvbkhlYWRlciA9IChoZWFkZXI6IHN0cmluZykgPT4gYm9sZChibHVlKGhlYWRlcikpO1xuICBib2xkID0gKG1lc3NhZ2U6IHN0cmluZykgPT4gYm9sZChtZXNzYWdlKTtcbiAgZGltID0gKG1lc3NhZ2U6IHN0cmluZykgPT4gZGltKG1lc3NhZ2UpO1xuICBsaW5rID0gKGxpbms6IHN0cmluZykgPT4gdW5kZXJsaW5lKGJsdWUobGluaykpO1xuICBsaXN0ID0gKGxpbmVzOiBzdHJpbmdbXSkgPT5cbiAgICBsaW5lcy5tYXAoKGxpbmU6IHN0cmluZykgPT4gYCAtICR7bGluZX1gKS5qb2luKG9zLkVPTCk7XG4gIGluZGVudCA9IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICBpZiAobWVzc2FnZSA9PT0gJycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWVzc2FnZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9XG4gICAgY29uc3Qgc3BhY2VzID0gJyAgJzsgLy8gVHdvIHNwYWNlcyBmb3IgaW5kZW50YXRpb25cbiAgICByZXR1cm4gbWVzc2FnZVxuICAgICAgLnNwbGl0KG9zLkVPTClcbiAgICAgIC5tYXAoKGxpbmUpID0+IGAke3NwYWNlc30ke2xpbmV9YClcbiAgICAgIC5qb2luKG9zLkVPTCk7XG4gIH07XG4gIHJlY29yZCA9IChyZWNvcmQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bWJlciB8IERhdGU+KSA9PlxuICAgIE9iamVjdC5lbnRyaWVzKHJlY29yZClcbiAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fTogJHtTdHJpbmcodmFsdWUpfWApXG4gICAgICAuam9pbihvcy5FT0wpO1xuICBjb2xvciA9IChtZXNzYWdlOiBzdHJpbmcsIGNvbG9yTmFtZTogQ29sb3JOYW1lKSA9PiBjb2xvcnNbY29sb3JOYW1lXShtZXNzYWdlKTtcbn1cblxuLy8gTWFwIHRvIGNvbm5lY3QgY29sb3JOYW1lIHRvIGtsZXVyIGNvbG9yXG5jb25zdCBjb2xvcnM6IFJlY29yZDxDb2xvck5hbWUsIENvbG9yaXplPiA9IHtcbiAgR3JlZW46IGdyZWVuLFxuICBZZWxsb3c6IHllbGxvdyxcbiAgQmx1ZTogYmx1ZSxcbiAgTWFnZW50YTogbWFnZW50YSxcbiAgQ3lhbjogY3lhbixcbn07XG5cbmV4cG9ydCBjb25zdCBjb2xvck5hbWVzID0gW1xuICAnR3JlZW4nLFxuICAnWWVsbG93JyxcbiAgJ0JsdWUnLFxuICAnTWFnZW50YScsXG4gICdDeWFuJyxcbl0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIENvbG9yTmFtZSA9ICh0eXBlb2YgY29sb3JOYW1lcylbbnVtYmVyXTtcblxuZXhwb3J0IGNvbnN0IGZvcm1hdCA9IG5ldyBGb3JtYXQoKTtcbiJdfQ==