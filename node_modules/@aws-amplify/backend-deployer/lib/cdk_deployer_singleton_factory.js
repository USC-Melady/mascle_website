import { CDKDeployer } from './cdk_deployer.js';
import { CdkErrorMapper } from './cdk_error_mapper.js';
import { BackendLocator } from '@aws-amplify/platform-core';
/**
 * Factory to create a backend deployer
 */
export class BackendDeployerFactory {
    packageManagerController;
    formatter;
    static instance;
    /**
     * constructor - sets the packageManagerController
     */
    constructor(packageManagerController, formatter) {
        this.packageManagerController = packageManagerController;
        this.formatter = formatter;
    }
    /**
     * Returns a single instance of BackendDeployer
     */
    getInstance() {
        if (!BackendDeployerFactory.instance) {
            BackendDeployerFactory.instance = new CDKDeployer(new CdkErrorMapper(this.formatter), new BackendLocator(), this.packageManagerController);
        }
        return BackendDeployerFactory.instance;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrX2RlcGxveWVyX3NpbmdsZXRvbl9mYWN0b3J5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2Nka19kZXBsb3llcl9zaW5nbGV0b25fZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDaEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQXdDNUQ7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0JBQXNCO0lBT2Q7SUFDQTtJQVBYLE1BQU0sQ0FBQyxRQUFRLENBQThCO0lBRXJEOztPQUVHO0lBQ0gsWUFDbUIsd0JBQWtELEVBQ2xELFNBQXlDO1FBRHpDLDZCQUF3QixHQUF4Qix3QkFBd0IsQ0FBMEI7UUFDbEQsY0FBUyxHQUFULFNBQVMsQ0FBZ0M7SUFDekQsQ0FBQztJQUVKOztPQUVHO0lBQ0gsV0FBVztRQUNULElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxRQUFRLEVBQUU7WUFDcEMsc0JBQXNCLENBQUMsUUFBUSxHQUFHLElBQUksV0FBVyxDQUMvQyxJQUFJLGNBQWMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQ2xDLElBQUksY0FBYyxFQUFFLEVBQ3BCLElBQUksQ0FBQyx3QkFBd0IsQ0FDOUIsQ0FBQztTQUNIO1FBQ0QsT0FBTyxzQkFBc0IsQ0FBQyxRQUFRLENBQUM7SUFDekMsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQmFja2VuZElkZW50aWZpZXIsXG4gIHR5cGUgUGFja2FnZU1hbmFnZXJDb250cm9sbGVyLFxufSBmcm9tICdAYXdzLWFtcGxpZnkvcGx1Z2luLXR5cGVzJztcbmltcG9ydCB7IENES0RlcGxveWVyIH0gZnJvbSAnLi9jZGtfZGVwbG95ZXIuanMnO1xuaW1wb3J0IHsgQ2RrRXJyb3JNYXBwZXIgfSBmcm9tICcuL2Nka19lcnJvcl9tYXBwZXIuanMnO1xuaW1wb3J0IHsgQmFja2VuZExvY2F0b3IgfSBmcm9tICdAYXdzLWFtcGxpZnkvcGxhdGZvcm0tY29yZSc7XG5pbXBvcnQgeyBCYWNrZW5kRGVwbG95ZXJPdXRwdXRGb3JtYXR0ZXIgfSBmcm9tICcuL3R5cGVzLmpzJztcblxuZXhwb3J0IHR5cGUgRGVwbG95UHJvcHMgPSB7XG4gIHNlY3JldExhc3RVcGRhdGVkPzogRGF0ZTtcbiAgdmFsaWRhdGVBcHBTb3VyY2VzPzogYm9vbGVhbjtcbiAgcHJvZmlsZT86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIERlc3Ryb3lQcm9wcyA9IHtcbiAgcHJvZmlsZT86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIERlcGxveVJlc3VsdCA9IHtcbiAgZGVwbG95bWVudFRpbWVzOiBEZXBsb3ltZW50VGltZXM7XG59O1xuXG5leHBvcnQgdHlwZSBEZXN0cm95UmVzdWx0ID0ge1xuICBkZXBsb3ltZW50VGltZXM6IERlcGxveW1lbnRUaW1lcztcbn07XG5cbmV4cG9ydCB0eXBlIERlcGxveW1lbnRUaW1lcyA9IHtcbiAgc3ludGhlc2lzVGltZT86IG51bWJlcjtcbiAgdG90YWxUaW1lPzogbnVtYmVyO1xufTtcblxuLyoqXG4gKiBJbnZva2VzIGFuIGludm9rYWJsZSBjb21tYW5kXG4gKi9cbmV4cG9ydCB0eXBlIEJhY2tlbmREZXBsb3llciA9IHtcbiAgZGVwbG95OiAoXG4gICAgYmFja2VuZElkOiBCYWNrZW5kSWRlbnRpZmllcixcbiAgICBkZXBsb3lQcm9wcz86IERlcGxveVByb3BzLFxuICApID0+IFByb21pc2U8RGVwbG95UmVzdWx0PjtcbiAgZGVzdHJveTogKFxuICAgIGJhY2tlbmRJZDogQmFja2VuZElkZW50aWZpZXIsXG4gICAgZGVzdHJveVByb3BzPzogRGVzdHJveVByb3BzLFxuICApID0+IFByb21pc2U8RGVzdHJveVJlc3VsdD47XG59O1xuXG4vKipcbiAqIEZhY3RvcnkgdG8gY3JlYXRlIGEgYmFja2VuZCBkZXBsb3llclxuICovXG5leHBvcnQgY2xhc3MgQmFja2VuZERlcGxveWVyRmFjdG9yeSB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBCYWNrZW5kRGVwbG95ZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIGNvbnN0cnVjdG9yIC0gc2V0cyB0aGUgcGFja2FnZU1hbmFnZXJDb250cm9sbGVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IHBhY2thZ2VNYW5hZ2VyQ29udHJvbGxlcjogUGFja2FnZU1hbmFnZXJDb250cm9sbGVyLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZm9ybWF0dGVyOiBCYWNrZW5kRGVwbG95ZXJPdXRwdXRGb3JtYXR0ZXIsXG4gICkge31cblxuICAvKipcbiAgICogUmV0dXJucyBhIHNpbmdsZSBpbnN0YW5jZSBvZiBCYWNrZW5kRGVwbG95ZXJcbiAgICovXG4gIGdldEluc3RhbmNlKCk6IEJhY2tlbmREZXBsb3llciB7XG4gICAgaWYgKCFCYWNrZW5kRGVwbG95ZXJGYWN0b3J5Lmluc3RhbmNlKSB7XG4gICAgICBCYWNrZW5kRGVwbG95ZXJGYWN0b3J5Lmluc3RhbmNlID0gbmV3IENES0RlcGxveWVyKFxuICAgICAgICBuZXcgQ2RrRXJyb3JNYXBwZXIodGhpcy5mb3JtYXR0ZXIpLFxuICAgICAgICBuZXcgQmFja2VuZExvY2F0b3IoKSxcbiAgICAgICAgdGhpcy5wYWNrYWdlTWFuYWdlckNvbnRyb2xsZXIsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gQmFja2VuZERlcGxveWVyRmFjdG9yeS5pbnN0YW5jZTtcbiAgfVxufVxuIl19